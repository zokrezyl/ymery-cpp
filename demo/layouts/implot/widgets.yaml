widgets:
  # ============================================================================
  # DRAGGABLE BUTTON DEMO POPUP
  # ============================================================================
  draggable-demo-popup:
    type: imgui.popup
    body:
      - imgui.text: "Draggable Button Menu"
      - imgui.separator
      - imgui.menu-item:
          label: "Action 1"
      - imgui.menu-item:
          label: "Action 2"
      - imgui.menu-item:
          label: "Action 3"
      - imgui.separator
      - imgui.text: "Drag the button to reposition it!"

  # ============================================================================
  # TEXT WIDGET DEMOS
  # ============================================================================
  text-demo:
    type: imgui.composite
    body:
      - imgui.separator-text: "TEXT WIDGET DEMOS"
      - builtin.collapsing-header:
          label: "Text - Static"
          flags: [default-open]
          body:
            - imgui.text: "This is static text"
      - builtin.collapsing-header:
          label: "Text - With Red Color Style"
          body:
            - data-path: text-single
              imgui.text:
                style:
                  imgui.text: [1.0, 0.0, 0.0, 1.0]
      - imgui.collapsing-header:
          label: "Text - With Blue Color Style"
          body:
            - data-path: text-single
              imgui.text:
                style:
                  imgui.text: [0.0, 0.5, 1.0, 1.0]
      - imgui.collapsing-header:
          label: "Text - With Yellow Color Style"
          body:
            - data-path: text-single
              imgui.text:
                style:
                  imgui.text: [1.0, 1.0, 0.0, 1.0]
      - imgui.collapsing-header:
          label: "Text - Dynamic Single Value"
          body:
            - data-path: text-single
              imgui.text:
      - data-path: text-dict
        imgui.collapsing-header:
          label: "Text - Dynamic Dict (renders keys)"
          body:
            foreach-child:
              - imgui.text

  # ============================================================================
  # BULLET TEXT WIDGET DEMOS
  # ============================================================================
  bullet-demo:
    type: imgui.composite
    body:
      - imgui.separator-text: "BULLET TEXT WIDGET DEMOS"
      - imgui.collapsing-header:
          label: "BulletText - Static"
          flags: [default-open]
          body:
            - imgui.bullet-text: "Static bullet point"
      - imgui.collapsing-header:
          label: "BulletText - Dynamic Single Value"
          body:
            - data-path: bullet-single
              imgui.bullet-text:
      - data-path: bullet-dict
        imgui.collapsing-header:
          label: "BulletText - Dynamic Dict (renders keys)"
          body:
            foreach-child:
              - imgui.bullet-text

  # ============================================================================
  # SEPARATOR TEXT WIDGET DEMOS
  # ============================================================================
  separator-demo:
    type: imgui.composite
    body:
      - imgui.separator-text: "SEPARATOR TEXT WIDGET DEMOS"
      - imgui.collapsing-header:
          label: "SeparatorText - Static"
          flags: [default-open]
          body:
            - imgui.separator-text: "Static Section Header"
      - imgui.collapsing-header:
          label: "SeparatorText - Dynamic Single Value"
          body:
            - data-path: separator-single
              imgui.separator-text:
      - data-path: separator-dict
        imgui.collapsing-header:
          label: "SeparatorText - Dynamic Dict (renders keys)"
          body:
            foreach-child:
              - imgui.separator-text

  # ============================================================================
  # BUTTON WIDGET DEMOS
  # ============================================================================
  button-demo:
    type: imgui.composite
    body:
      - imgui.separator-text: "BUTTON WIDGET DEMOS"
      - imgui.collapsing-header:
          label: "Button - Static"
          flags: [default-open]
          body:
            - imgui.button:
                label: "Static Button"
      - imgui.collapsing-header:
          label: "Button - With Red Style"
          body:
            - imgui.button:
                label: "Red Button"
                style:
                  imgui.button: [0.8, 0.1, 0.1, 1.0]
                  button-hovered: [1.0, 0.2, 0.2, 1.0]
                  button-active: [0.6, 0.05, 0.05, 1.0]
      - imgui.collapsing-header:
          label: "Button - With Green Style"
          body:
            - imgui.button:
                label: "Green Button"
                style:
                  imgui.button: [0.1, 0.7, 0.1, 1.0]
                  button-hovered: [0.2, 0.9, 0.2, 1.0]
                  button-active: [0.05, 0.5, 0.05, 1.0]
      - imgui.collapsing-header:
          label: "Button - Dynamic Single Value"
          body:
            - imgui.button:
              data-path: button-single
      - imgui.collapsing-header:
          label: "Button - Dynamic Dict (renders keys)"
          body:
            foreach-child:
              - imgui.button
        data-path: button-dict

  # ============================================================================
  # POPUP WIDGET DEMOS
  # ============================================================================
  regular-popup-demo-content:
    type: imgui.popup
    body:
      - imgui.text: "This is a regular popup"
      - imgui.separator
      - imgui.text: "You can interact with other widgets"

  popup-modal-demo-content:
    type: imgui.popup-modal
    body:
      - imgui.text: "This is a Modal Popup!"
      - imgui.separator
      - imgui.text: "Modal popups block interaction with other windows."
      - imgui.separator
      - imgui.text: "Click outside or press ESC to close"
      - imgui.button:
          label: Ok
          on-click:
            dispatch-event:
              event: click
      - imgui.same-line
      - imgui.button:
          label: Cancel
          on-click:
            dispatch-event:
              event: click
        

  popup-demo:
    type: imgui.composite
    body:
      - imgui.separator-text: "POPUP WIDGET DEMOS"
      - imgui.collapsing-header:
          label: "PopupModal - Blocks other windows"
          flags: [default-open]
          body:
            - imgui.button:
                label: "Open Modal Popup"
                body: popup-modal-demo-content
      - imgui.collapsing-header:
          label: "Popup - Regular (non-modal)"
          body:
            - imgui.button:
                label: "Open Regular Popup"
                body: regular-popup-demo-content

  # ============================================================================
  # TREE NODE WIDGET DEMOS
  # ============================================================================
  tree-recursive:
    type: imgui.composite
    body:
      - foreach-child:
          - imgui.tree-node:
              body: tree-recursive

  tree-demo:
    type: imgui.composite
    body:
      - imgui.separator-text: "TREE NODE WIDGET DEMOS"
      - imgui.collapsing-header:
          label: "TreeNode - Static"
          flags: [default-open]
          body:
            - imgui.tree-node:
                label: "Static Tree Node"
                body:
                  - imgui.text: "Content inside static tree node"
      - imgui.collapsing-header:
          label: "TreeNode - Dynamic Single Value"
          body:
            - imgui.tree-node:
                body: tree-recursive
              data-path: tree-single
      - imgui.collapsing-header:
          label: "TreeNode - Dynamic Dict (renders keys)"
          body:
            - imgui.tree-node:
                body: tree-recursive
              data-path: tree-dict

  # ============================================================================
  # COLLAPSING HEADER WIDGET DEMOS
  # ============================================================================
  collapsing-header-recursive:
    type: imgui.composite
    body:
      - foreach-child:
          - imgui.collapsing-header:
              body: collapsing-header-recursive

  collapsing-header-demo:
    type: imgui.composite
    body:
      - imgui.separator-text: "COLLAPSING HEADER WIDGET DEMOS"
      - imgui.collapsing-header:
          label: "CollapsingHeader - Static"
          flags: [default-open]
          body:
            - imgui.text: "Content in static collapsing header"
      - imgui.collapsing-header:
          label: "CollapsingHeader - Dynamic Single Value"
          body:
            - imgui.collapsing-header:
                body: collapsing-header-recursive
              data-path: collapse-single
      - imgui.collapsing-header:
          label: "CollapsingHeader - Dynamic Dict (renders keys)"
          body:
            - imgui.collapsing-header:
                body: collapsing-header-recursive
              data-path: collapse-dict

  # ============================================================================
  # MENU WIDGET DEMOS
  # ============================================================================
  menu-recursive:
    type: imgui.composite
    body:
      - foreach-child:
          - imgui.menu:
              body: menu-recursive

  menu-demo:
    type: imgui.composite
    body:
      - imgui.separator-text: "MENU WIDGET DEMOS"
      - imgui.collapsing-header:
          label: "Menu - Static"
          flags: [default-open]
          body:
            - imgui.menu:
                label: "Static Menu"
                body:
                  - imgui.menu-item: "Menu item 1"
                  - imgui.menu-item: "Menu item 2"
      - imgui.collapsing-header:
          label: "Menu - Dynamic Single Value"
          body:
            - imgui.menu:
                body: menu-recursive
              data-path: menu-single
      - imgui.collapsing-header:
          label: "Menu - Dynamic Dict (renders keys)"
          body:
            - imgui.menu:
                body: menu-recursive
              data-path: menu-dict

  # ============================================================================
  # MENU ITEM WIDGET DEMOS
  # ============================================================================
  menuitem-demo:
    type: imgui.composite
    body:
      - imgui.separator-text: "MENU ITEM WIDGET DEMOS"
      - imgui.collapsing-header:
          label: "MenuItem - Static"
          flags: [default-open]
          body:
            - imgui.menu:
                label: "Container Menu"
                body:
                  - imgui.menu-item: "Static Menu Item"
      - imgui.collapsing-header:
          label: "MenuItem - Dynamic Single Value"
          body:
            - imgui.menu:
                label: "Container Menu"
                body:
                  - imgui.menu-item:
                    data-path: menuitem-single
      - imgui.collapsing-header:
          label: "MenuItem - Dynamic Dict (renders keys)"
          body:
            - imgui.menu:
                label: "Container Menu"
                body:
                  foreach-child:
                    - imgui.menu-item
              data-path: menuitem-dict

  # ============================================================================
  # INPUT WIDGETS DEMOS
  # ============================================================================
  input-demo:
    type: imgui.composite
    body:
      - imgui.separator-text: "INPUT WIDGETS DEMOS"
      - imgui.collapsing-header:
          label: "Input Widgets (single values only)"
          flags: [default-open]
          body:
            - imgui.text: "Text Input:"
            - data-path: input-text
              imgui.input-text:
            - imgui.separator
            - imgui.text: "Integer Input:"
            - data-path: input-int
              imgui.input-int:
            - imgui.separator
            - imgui.text: "Integer Slider:"
            - data-path: slider-int
              imgui.slider-int:
                min: 0
                max: 100
            - imgui.separator
            - imgui.text: "Float Slider:"
            - data-path: slider-float
              imgui.slider-float:
                min: 0.0
                max: 1.0
            - imgui.separator
            - imgui.text: "Combo:"
            - data-path: combo
              imgui.combo:
                items:
                  - Option A
                  - Option B
                  - Option C
            - imgui.separator
            - imgui.text: "Checkbox:"
            - data-path: checkbox
              imgui.checkbox:
      - imgui.collapsing-header:
          label: "Input Widgets - With Custom Styles"
          body:
            - imgui.text:
                style:
                  imgui.text: [0.0, 1.0, 1.0, 1.0]
            - imgui.text: "Styled Text Input (cyan frame):"
            - data-path: input-text
              imgui.input-text:
                style:
                  frame-bg: [0.0, 0.3, 0.3, 0.5]
                  frame-bg-hovered: [0.0, 0.4, 0.4, 0.7]
                  frame-bg-active: [0.0, 0.5, 0.5, 0.9]
            - imgui.separator
            - imgui.text: "Styled Slider (orange):"
            - data-path: slider-float
              imgui.slider-float:
                min: 0.0
                max: 1.0
                style:
                  frame-bg: [0.5, 0.3, 0.0, 0.5]
                  slider-grab: [1.0, 0.6, 0.0, 1.0]
                  slider-grab-active: [1.0, 0.8, 0.2, 1.0]

  # ============================================================================
  # INDENT WIDGET DEMO
  # ============================================================================
  indent-demo:
    type: imgui.composite
    body:
      - imgui.separator-text: "INDENT WIDGET DEMO"
      - imgui.collapsing-header:
          label: "Indent - Basic"
          flags: [default-open]
          body:
            - imgui.text: "Normal text"
            - imgui.indent:
                body:
                  - imgui.text: "Indented text level 1"
                  - imgui.indent:
                      body:
                        - imgui.text: "Indented text level 2"
            - imgui.text: "Back to normal"

  # ============================================================================
  # MAIN DEMO ROOT
  # ============================================================================
  widgets-demo:
    type: imgui.composite
    body:
      - imgui.text: "WIDGET SYSTEM COMPREHENSIVE DEMO"
      - imgui.separator
      - imgui.text: "Each section shows: Static, Dynamic Single, Dynamic Dict"
      - imgui.separator
      - imgui.collapsing-header:
          label: "Text Widgets"
          body: text-demo
      - imgui.collapsing-header:
          label: "Bullet Text Widgets"
          body: bullet-demo
      - imgui.collapsing-header:
          label: "Separator Text Widgets"
          body: separator-demo
      - imgui.collapsing-header:
          label: "Button Widgets"
          body: button-demo
      - imgui.collapsing-header:
          label: "Popup Widgets"
          body: popup-demo
      - imgui.collapsing-header:
          label: "Tree Node Widgets"
          body: tree-demo
      - imgui.collapsing-header:
          label: "Collapsing Header Widgets"
          body: collapsing-header-demo
      - imgui.collapsing-header:
          label: "Menu Widgets"
          body: menu-demo
      - imgui.collapsing-header:
          label: "Menu Item Widgets"
          body: menuitem-demo
      - imgui.collapsing-header:
          label: "Input Widgets"
          body: input-demo
      - imgui.collapsing-header:
          label: "Indent Widget"
          body: indent-demo

  widgets-demo-popup:
    type: imgui.popup
    data:
      local:
        type: data-tree
        arg:
          children:
            text-single:
              metadata:
                label: "Single dynamic text value"
            text-dict:
              metadata:
                label: "Text Dict"
              children:
                first:
                  metadata:
                    label: "First text"
                second:
                  metadata:
                    label: "Second text"
                third:
                  metadata:
                    label: "Third text"
            bullet-single:
              metadata:
                label: "Single bullet point"
            bullet-dict:
              metadata:
                label: "Bullet Dict"
              children:
                feature1:
                  metadata:
                    label: "Feature One"
                feature2:
                  metadata:
                    label: "Feature Two"
                feature3:
                  metadata:
                    label: "Feature Three"
            separator-single:
              metadata:
                label: "Single Section Title"
            separator-dict:
              metadata:
                label: "Separator Dict"
              children:
                intro:
                  metadata:
                    label: "Introduction"
                main:
                  metadata:
                    label: "Main Content"
                conclusion:
                  metadata:
                    label: "Conclusion"
            button-single:
              metadata:
                label: "Click Me"
            button-dict:
              metadata:
                label: "Button Dict"
              children:
                save:
                  metadata:
                    label: "Save"
                load:
                  metadata:
                    label: "Load"
                delete:
                  metadata:
                    label: "Delete"
            tree-single:
              metadata:
                label: "Single Tree Node"
            tree-dict:
              metadata:
                label: "Tree Dict"
              children:
                node1:
                  metadata:
                    label: "First Node"
                node2:
                  metadata:
                    label: "Second Node"
                node3:
                  metadata:
                    label: "Third Node"
            collapse-single:
              metadata:
                label: "Single Collapsing Section"
            collapse-dict:
              metadata:
                label: "Collapse Dict"
              children:
                settings:
                  metadata:
                    label: "Settings"
                advanced:
                  metadata:
                    label: "Advanced"
                debug:
                  metadata:
                    label: "Debug"
            menu-single:
              metadata:
                label: "Main Menu"
            menu-dict:
              metadata:
                label: "Menu Dict"
              children:
                file:
                  metadata:
                    label: "File"
                edit:
                  metadata:
                    label: "Edit"
                view:
                  metadata:
                    label: "View"
            menuitem-single:
              metadata:
                label: "Menu Action"
            menuitem-dict:
              metadata:
                label: "MenuItem Dict"
              children:
                new:
                  metadata:
                    label: "New"
                open:
                  metadata:
                    label: "Open"
                close:
                  metadata:
                    label: "Close"
            imgui.input-text:
              metadata:
                label: "Editable text"
            imgui.input-int:
              metadata:
                label: "42"
            imgui.slider-int:
              metadata:
                label: "50"
            imgui.slider-float:
              metadata:
                label: "0.5"
            imgui.combo:
              metadata:
                label: "Option A"
            imgui.checkbox:
              metadata:
                label: "True"
            imgui.color-edit:
              metadata:
                label: [1.0, 0.5, 0.2, 1.0]
            imgui.color-button:
              metadata:
                label: [0.2, 0.7, 1.0, 1.0]
    main-data: local
    body: widgets-demo

  # ============================================================================
  # FOREACH-KEY DEMO
  # ============================================================================
  foreach-key-demo-popup:
    type: imgui.popup
    data:
      local:
        type: data-tree
        arg:
          metadata:
            name: "Sample Node"
            type: "demo"
            status: "active"
            count: 42
    main-data: local
    body:
      - imgui.text: "foreach-key Demo - Displays metadata keys and values"
      - imgui.separator
      - imgui.text: "Simple form (shows values only):"
      - foreach-key: text
      - imgui.separator
      - imgui.text: "Complex form (shows keys and values):"
      - foreach-key:
          - imgui.text: "$key"
          - imgui.text: "$value"
          - imgui.separator

  metadata-tooltip:
    type: imgui.tooltip
    body:
      - imgui.text: "Metadata:"
      - imgui.separator
      - foreach-key:
          - imgui.text: "$key: $value"

  kernel-recursive:
    type: imgui.composite
    body:
      - foreach-child:
          - imgui.tree-node:
              body: kernel-recursive
              on-click: default
              on-hover:
                show: metadata-tooltip
              selection: "$selection@/selection"
              style-mapping:
                openable:
                  imgui.text: [0.2, 0.8, 0.2, 1.0]
                opened:
                  imgui.text: [0.8, 0.8, 0.2, 1.0]

  kernel-demo-popup:
    type: imgui.popup
    data:
      kernel:
        type: kernel
      selection:
        type: data-tree
        arg:
          metadata:
            selection: ""
    main-data: kernel
    body:
      - imgui.text: "Kernel TreeLike Demo - Click nodes to select, hover to see metadata"
      - imgui.separator
      - imgui.text: "Selection: "
      - imgui.same-line
      - imgui.text:
          label: "$selection@/selection"
          style:
            imgui.text: [0.2, 1.0, 0.2, 1.0]
      - imgui.separator
      - data-path: $kernel
        kernel-recursive:

  implot-demo-popup:
    type: imgui.popup
    data:
      kernel:
        type: kernel
    main-data: kernel
    body:
      - imgui.text: "Implot Waveform Demo"
      - imgui.separator
      - implot:
          label: "Waveforms"
          body:
            - implot.implot-layer:
                label: "Sine"
              data-path: /providers/waveform-st/available/sine/0
            - implot.implot-layer:
                label: "Square"
              data-path: /providers/waveform-st/available/square/0
            - implot.implot-layer:
                label: "Triangle"
              data-path: /providers/waveform-st/available/triangle/0

  table-demo-popup:
    type: imgui.popup
    body:
      - imgui.text: "Table Widget Demo"
      - imgui.separator
      - imgui.table:
          label: "Demo Table"
          columns: 3
          flags: [borders, row-bg, sizing-stretch-prop]
          body:
            - imgui.row:
                flags: [headers]
                body:
                  - imgui.column:
                      body:
                        - imgui.text: "Column 1"
                  - imgui.column:
                      body:
                        - imgui.text: "Column 2"
                  - imgui.column:
                      body:
                        - imgui.text: "Column 3"
            - imgui.row:
                body:
                  - imgui.column:
                      body:
                        - imgui.text: "Row 1, Col 1"
                  - imgui.column:
                      body:
                        - imgui.text: "Row 1, Col 2"
                  - imgui.column:
                      body:
                        - imgui.text: "Row 1, Col 3"
            - imgui.row:
                body:
                  - imgui.column:
                      body:
                        - imgui.text: "Row 2, Col 1"
                  - imgui.column:
                      body:
                        - imgui.text: "Row 2, Col 2"
                  - imgui.column:
                      body:
                        - imgui.text: "Row 2, Col 3"
            - imgui.row:
                body:
                  - imgui.column:
                      body:
                        - imgui.text: "Row 3, Col 1"
                  - imgui.column:
                      body:
                        - imgui.text: "Row 3, Col 2"
                  - imgui.column:
                      body:
                        - imgui.text: "Row 3, Col 3"

  tab-demo-popup:
    type: imgui.popup
    data:
      local:
        type: data-tree
        arg:
          children:
            imgui.input-text:
              metadata:
                label: "Editable text"
            imgui.slider-int:
              metadata:
                label: "50"
            imgui.color-edit:
              metadata:
                label: [1.0, 0.5, 0.2, 1.0]
            imgui.color-button:
              metadata:
                label: [0.2, 0.7, 1.0, 1.0]
    main-data: local
    body:
      - imgui.text: "Tab Widget Demo"
      - imgui.separator
      - imgui.tab-bar:
          label: "Demo Tabs"
          body:
            - imgui.tab-item:
                label: "Tab 1"
                body:
                  - imgui.text: "Content of Tab 1"
                  - imgui.separator
                  - imgui.text: "This is the first tab"
                  - imgui.bullet-text: "Feature A"
                  - imgui.bullet-text: "Feature B"
                  - imgui.bullet-text: "Feature C"
            - imgui.tab-item:
                label: "Tab 2"
                body:
                  - imgui.text: "Content of Tab 2"
                  - imgui.separator
                  - data-path: input-text
                    imgui.text: "Text Input:"
                  - data-path: input-text
                    imgui.input-text:
                  - imgui.separator
                  - imgui.text: "Slider:"
                  - data-path: slider-int
                    imgui.slider-int:
                      min: 0
                      max: 100
            - imgui.tab-item:
                label: "Tab 3"
                body:
                  - imgui.text: "Content of Tab 3"
                  - imgui.separator
                  - imgui.button:
                      label: "Button 1"
                  - imgui.button:
                      label: "Button 2"
                  - imgui.button:
                      label: "Button 3"
            - imgui.tab-item:
                label: "Colors"
                body:
                  - imgui.text: "Color Widgets Demo"
                  - imgui.separator
                  - imgui.text: "Color Edit (RGBA):"
                  - data-path: color-edit
                    imgui.color-edit:
                  - imgui.separator
                  - imgui.text: "Color Button:"
                  - data-path: color-button
                    imgui.color-button:
                  - imgui.same-line
                  - imgui.text: "Click to see color"

