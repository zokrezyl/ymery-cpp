widgets:
  matplotlib-demo:
    type: composite
    data:
      local:
        type: data-tree
        arg:
          children:
            points:
              metadata:
                label: 50
            amplitude:
              metadata:
                label: 1.0
            frequency:
              metadata:
                label: 1.0
            noise:
              metadata:
                label: 0.1
            plot_type:
              metadata:
                label: "line"
    main-data: local
    body:
      - separator-text: "Matplotlib Integration"

      - markdown-unindented: |
          Interactive matplotlib plots embedded in ImGui.
          - Uses **Agg backend** for headless rendering
          - Displays via **immvision** image viewer

      - columns:
          count: 2

      - next-column:

      # Controls column - main tree is plot-data, so use relative paths
      - text: "Points"
      - data-path: points
        slider-int:
          min: 10
          max: 200

      - text: "Amplitude"
      - data-path: amplitude
        slider-float:
          min: 0.1
          max: 3.0

      - text: "Frequency"
      - data-path: frequency
        slider-float:
          min: 0.1
          max: 5.0

      - text: "Noise"
      - data-path: noise
        slider-float:
          min: 0.0
          max: 1.0

      - next-column:

      # Plot column - use @ references to read values
      - matplotlib:
          size: [450, 400]
          points: "@/points/label"
          amplitude: "@/amplitude/label"
          frequency: "@/frequency/label"
          noise: "@/noise/label"
          plot_type: "@/plot_type/label"

      - columns:
          count: 1
